<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core">

    <body>

        <ui:composition template="./../../templates/master_template.xhtml">

            <ui:define name="page_title">
                page_title
            </ui:define>

            <ui:define name="content">
                <h2>Segurança -> Conta -> Concluir a Criação da Conta</h2>
                <p></p>
                <p:fieldset>

                    <br/>

                    <p:fieldset >
                        <center>
                            <h2>Defina os Parametros da Conta</h2>
                        </center> 

                        <h:panelGrid columns="2">
                            <p:outputLabel
                                value="Perfil:"
                                />
                            <p:selectOneMenu 
                                value="#{segUtilizadorConcluirCriacaoContaBean.idPerfil}"
                                style="width:350px;margin-left:28px" filter="true"
                                >  
                                <f:selectItems 
                                    value="#{segPerfilBean.listaPerfil}" 
                                    var="perfil" 
                                    itemLabel="#{perfil.descricao}" 
                                    itemValue="#{perfil.pkSegPerfil}"
                                    />
                            </p:selectOneMenu>

                            <p:outputLabel
                                value="Tipo de Conta"
                                />
                            <p:selectOneMenu 
                                value="#{segUtilizadorConcluirCriacaoContaBean.tipoConta}"
                                style="width:350px;margin-left:28px" filter="true"
                                >  
                                <f:selectItems 
                                    value="#{tipoContaBean.lista}" 
                                    var="perfil" 
                                    itemLabel="#{perfil.nome}" 
                                    itemValue="#{perfil.pkSegTipoConta}"
                                    />
                            </p:selectOneMenu>

                            <p:outputLabel 
                                value="Nome de Utilizador:"
                                />
                            <p:inputText
                                value="#{segUtilizadorConcluirCriacaoContaBean.conta.nomeUtilizador}"
                                style="width:365px;margin-left:28px"
                                />

                            <p:outputLabel 
                                value="Palavra-Passe:"
                                />
                            <p:inputText
                                value="#{segUtilizadorConcluirCriacaoContaBean.palavaraPasseVizualizar}"
                                style="width:365px;margin-left:28px"
                                />

                            <p:outputLabel 
                                value="Funcionário:"
                                />
                            <h:outputText 
                                value="#{segPessoaBean.find(segUtilizadorConcluirCriacaoContaBean.conta.fkSegPessoa).nome}"
                                style="width:350px;margin-left:28px"
                                />
                            <p:outputLabel 
                                value="Estado da Conta:"
                                />
                            <h:outputText 
                                value="#{segUtilizadorConcluirCriacaoContaBean.conta.activo ? 'Ativa':'Desativa'}"
                                style="margin-left:28px"
                                />


                        </h:panelGrid>

                    </p:fieldset>
                    <br/>

                    <p:commandButton 
                        icon="ui-icon-check" 
                        value="Concluir"
                        update="form_geral" 
                        actionListener="#{segUtilizadorConcluirCriacaoContaBean.criarConta()}"
                        disabled="#{segUtilizadorConcluirCriacaoContaBean.criou}"
                        onstart="PF('w_dlgLoading').show();" 
                        oncomplete="PF('w_dlgLoading').hide();"
                        />
                    <p:commandButton 
                        icon="ui-icon-seek-prev" 
                        value="Voltar"
                        action="seg_utilizador_novo.xhtml?faces-redirect=true"/>

                </p:fieldset>

            </ui:define>

        </ui:composition>

    </body>
</html>
